{"version":3,"sources":["webpack:///./src/pages/tools.vue?6177","webpack:///src/pages/tools.vue","webpack:///./src/pages/tools.vue?1903","webpack:///./src/pages/tools.vue","webpack:///./src/pages/tools.vue?b257"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","ref","staticClass","form","rules","model","value","callback","$$v","$set","trim","expression","on","getData","_v","handleClean","staticStyle","table","staticRenderFns","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACA,EAAG,SAAS,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,UAAU,CAACG,IAAI,OAAOC,YAAY,OAAOF,MAAM,CAAC,MAAQN,EAAIS,KAAK,MAAQT,EAAIU,MAAM,cAAc,UAAU,CAACN,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,QAAQ,KAAO,QAAQ,CAACF,EAAG,WAAW,CAACO,MAAM,CAACC,MAAOZ,EAAIS,KAAQ,IAAEI,SAAS,SAAUC,GAAMd,EAAIe,KAAKf,EAAIS,KAAM,MAAuB,kBAARK,EAAkBA,EAAIE,OAAQF,IAAOG,WAAW,eAAe,GAAGb,EAAG,eAAe,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWY,GAAG,CAAC,MAAQlB,EAAImB,UAAU,CAACnB,EAAIoB,GAAG,QAAQhB,EAAG,YAAY,CAACc,GAAG,CAAC,MAAQlB,EAAIqB,cAAc,CAACrB,EAAIoB,GAAG,SAAS,IAAI,IAAI,IAAI,GAAGhB,EAAG,SAAS,CAACA,EAAG,SAAS,CAACA,EAAG,WAAW,CAACkB,YAAY,CAAC,MAAQ,QAAQhB,MAAM,CAAC,KAAON,EAAIuB,MAAM,OAAS,GAAG,OAAS,KAAK,CAACnB,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,QAAQ,MAAQ,OAAO,MAAQ,KAAK,MAAQ,YAAYF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,MAAM,MAAQ,UAAUF,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,QAAQ,MAAQ,cAAc,IAAI,IAAI,IAAI,IAC5/BkB,EAAkB,GC2BtB,G,oBAAA,CACE,KAAF,QACE,KAFF,WAGI,IAAJ,kBACM,IAAN,EACQ,OAAR,sBAEQ,IAAR,wGACA,UACU,IAEA,EAAV,wBAII,MAAJ,CACM,MAAN,CACQ,IAAR,EAAU,UAAV,EAAU,QAAV,YAEM,KAAN,CACQ,IAAR,IAEM,MAAN,KAGE,QAAF,CACI,YADJ,WAEM,KAAN,YACM,KAAN,UAEI,QALJ,WAKM,IAAN,OACM,KAAN,iCACQ,IAAR,EA0CU,OAAV,EAzCU,IAAV,cAAY,MAAZ,IAEA,aACA,iBACA,YAEA,EADA,oBACA,SACA,aAGU,MAAV,mBACY,OAAZ,OACY,KAAZ,gBAAc,IAAd,IACY,QAAZ,aACc,eAAd,uBAEA,kBACY,GAAZ,eACc,OAAd,SAEc,MAAd,yBAEA,kBACY,GAAZ,SACA,mBACA,CACc,IAAd,mCACc,EAAd,iBACgB,MAAhB,OACgB,QAAhB,IAEc,EAAd,aAEA,kBACY,EAAZ,eACc,MAAd,OACc,QAAd,aAEY,EAAZ,YACA,oBAAY,OAAZ,oBCpG+U,I,wBCQ3UC,EAAY,eACd,EACA1B,EACAyB,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,2CCnBf,yBAAoe,EAAG,G","file":"../static/js/chunk-3d7f389e.8a9f1df7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-main',[_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form',{ref:\"form\",staticClass:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"请输入网址\",\"prop\":\"url\"}},[_c('el-input',{model:{value:(_vm.form.url),callback:function ($$v) {_vm.$set(_vm.form, \"url\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.url\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.getData}},[_vm._v(\"提交\")]),_c('el-button',{on:{\"click\":_vm.handleClean}},[_vm._v(\"清空\")])],1)],1)],1)],1),_c('el-row',[_c('el-col',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.table,\"stripe\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"跳转次数\",\"width\":\"80\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"url\",\"label\":\"跳转地址\"}}),_c('el-table-column',{attrs:{\"prop\":\"whois\",\"label\":\"网址拥有者信息\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <el-main>\n        <el-row>\n            <el-col :span=\"24\">\n                <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"100px\" class=\"form\">\n                    <el-form-item label=\"请输入网址\" prop=\"url\">\n                        <el-input v-model.trim=\"form.url\"></el-input>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"getData\">提交</el-button>\n                        <el-button @click=\"handleClean\">清空</el-button>\n                    </el-form-item>\n                </el-form>\n            </el-col>\n        </el-row>\n        <el-row>\n            <el-col>\n                <el-table :data=\"table\" stripe border style=\"width: 100%\">\n                    <el-table-column type=\"index\" label=\"跳转次数\" width=\"80\" align=\"center\"></el-table-column>\n                    <el-table-column prop=\"url\" label=\"跳转地址\"></el-table-column>\n                    <el-table-column prop=\"whois\" label=\"网址拥有者信息\"></el-table-column>\n                </el-table>\n            </el-col>\n        </el-row>\n    </el-main>\n</template>\n\n<script>\n    export default {\n        name: \"tools\",\n        data() {\n            let checkUrl = (rule, value, callback) => {\n                if (!value) {\n                    return callback(new Error('请输入网址'));\n                } else {\n                    let patt = /^(https?:)?(\\/\\/)?[-A-Za-z0-9+&@#%?=~_|!:,;]+\\.[-A-Za-z0-9+&@#%?=~_|!:,;]+[-A-Za-z0-9+&@#/%=~_|.]*/i;\n                    if (patt.test(value)) {\n                        callback()\n                    } else {\n                        callback(new Error('请输入正确的网址'))\n                    }\n                }\n            };\n            return {\n                rules: {\n                    url: [{validator: checkUrl, trigger: 'change'}]\n                },\n                form: {\n                    url: ''\n                },\n                table: []\n            }\n        },\n        methods: {\n            handleClean() {\n                this.form.url = '';\n                this.table = [];\n            },\n            getData() {\n                this.$refs.form.validate((valid) => {\n                    if (valid) {\n                        const loading = this.$loading({lock: true});\n\n                        let url = this.form.url;\n                        let patt = /^https?:\\/\\//;\n                        if (!patt.test(url)) {\n                            if (url.slice(0, 2) === '//')\n                                url = 'http' + url;\n                            else url = 'http://' + url;\n                        }\n\n                        fetch('/v1/trackingUrl', {\n                            method: 'POST',\n                            body: JSON.stringify({url}),\n                            headers: new Headers({\n                                'Content-Type': 'application/json'\n                            })\n                        }).then(res => {\n                            if (res.status === 200) {\n                                return res.json();\n                            } else {\n                                throw new Error('请求失败，请重试');\n                            }\n                        }).then(res => {\n                            if (res.status)\n                                this.table = res.data;\n                            else {\n                                let msg = res.message ? res.message : '追踪失败，请稍后再试';\n                                this.$notify.warning({\n                                    title: '追踪失败',\n                                    message: msg\n                                });\n                                this.table = [];\n                            }\n                        }).catch(() => {\n                            this.$notify.error({\n                                title: '请求失败',\n                                message: '请求失败，请重试'\n                            });\n                            this.table = [];\n                        }).finally(() => loading.close())\n                    } else {\n                        return false;\n                    }\n                });\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .form {\n        width: 100%;\n        max-width: 400px;\n        margin: 0 auto;\n    }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tools.vue?vue&type=template&id=6115fcd6&scoped=true&\"\nimport script from \"./tools.vue?vue&type=script&lang=js&\"\nexport * from \"./tools.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tools.vue?vue&type=style&index=0&id=6115fcd6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6115fcd6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=6115fcd6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tools.vue?vue&type=style&index=0&id=6115fcd6&scoped=true&lang=css&\""],"sourceRoot":""}